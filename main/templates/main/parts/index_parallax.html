{% load static %}
<style type="text/css">
	.relative_block{
		position: relative;
	}
	.absolute_block{
		position: absolute;
	}
</style>

<section id='bubbles_wrap' class='py-2'>
	<div id='bubbles'>

		  <h1 class='very_big'>ЭМОЦИИ</h1>

      <h2 class='pt-2 pb-4 we_300 index_sub pt-4'>Только вперёд!</h2>

		<img id='car' class='the_car_img' src="{% static 'transperent/beauty_car_2.png' %}" alt="" />	



		<section class='relative_block'>
			<img id='' class='absolute_block w-100' src="{% static 'abstract/ellipse_2_white.svg' %}" alt="" />
		</section>

		<section class='relative_block'>
			<img id='' class='absolute_block' src="{% static 'abstract/ellipse_2.svg' %}" alt="" />
		</section>

		<section class='relative_block'>
			<img id='' class='absolute_block' src="{% static 'abstract/ellipse_3_white.svg' %}" alt="" />
		</section>

		<section class='relative_block'>
			<img id='' class='absolute_block' src="{% static 'abstract/ellipse_3.svg' %}" alt="" />
		</section>

		<section class='relative_block'>
			<img id='' class='absolute_block' src="{% static 'abstract/ellipse_twice.svg' %}" alt="" />
		</section>


		<img class='w-100' src="{% static 'transperent/founders.png' %}" />

		<img id='elem_2' class=' ' src="{% static 'illustr/Cone_01_2_3.svg' %}" alt="" />
		<img id='elem_3' class=' ' src="{% static 'illustr/Cone_01_2_15.svg' %}"  alt="" />
		<img id='elem_4' class=' ' src="{% static 'illustr/Cone_01_2.svg' %}" alt="" />
		<img id='elem_5' class=' '  src="{% static 'illustr/Cone_01_2_10.svg' %}" alt="" />
	</div>
</section>





 <div class="wrapper">
    <div class="slide_scroll">
    </div>
        <div class="slide_scroll">
      <div class='slide_content black_bg'>
      </div>
    </div>
    <div class="slide_scroll">
      <div class='slide_content white_bg'>
      </div>
    </div>
    <div class="slide_scroll">
      <div class='slide_content red_bg'>
      </div>
    </div>
  </div>



<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>

<script type="text/javascript">
  console.clear();
  gsap.registerPlugin(ScrollTrigger);

  const slides = gsap.utils.toArray(".slide_scroll");
  slides.shift();

  gsap.to(slides, {
    duration: 1,
    clipPath: "circle(0% at 50% 50%)",
    /*clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",*/
    stagger: 1,
    ease: "power2.inOut",
    scrollTrigger: {
      trigger: ".wrapper",
      start: "top top",
      end: "+=" + 60 * slides.length + "%",
      scrub: true,
      snap: 1 / slides.length,
      pin: true,
      markers: true
    }
  });


slides.forEach((slide, index) => {
        gsap.to(slide, {
            scrollTrigger: {
                trigger: slide,
                start: "top top",
                end: "+=100%",
                scrub: true,
                onEnter: () => {
                    gsap.to(slide, { clipPath: "circle(150% at 50% 50%)" }); // Adjust circle size for reveal
                },
                onLeaveBack: () => {
                    gsap.to(slide, { clipPath: "circle(0% at 50% 50%)" }); // Reset circle size
                }
            }
        });
    });
</script>
